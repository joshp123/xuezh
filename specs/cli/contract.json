{
  "schema_version": "2",
  "single_user": true,
  "commands": [
    {
      "id": "version",
      "cli": "xuezh version --json",
      "schema_ok": "schemas/version.schema.json",
      "ticket": "T-00",
      "example_cli": "xuezh version --json"
    },
    {
      "id": "snapshot",
      "cli": "xuezh snapshot --window 30d --due-limit 80 --evidence-limit 200 --max-bytes 200000 --json",
      "schema_ok": "schemas/snapshot.schema.json",
      "ticket": "T-05",
      "example_cli": "xuezh snapshot --window 30d --due-limit 80 --evidence-limit 200 --max-bytes 200000 --json"
    },
    {
      "id": "db.init",
      "cli": "xuezh db init --json",
      "schema_ok": "schemas/db.init.schema.json",
      "ticket": "T-03",
      "example_cli": "xuezh db init --json"
    },
    {
      "id": "dataset.import",
      "cli": "xuezh dataset import --type hsk_vocab --path FILE --json",
      "schema_ok": "schemas/dataset.import.schema.json",
      "ticket": "T-04",
      "example_cli": "xuezh dataset import --type hsk_vocab --path FILE --json"
    },
    {
      "id": "review.start",
      "cli": "xuezh review start --limit 10 --json",
      "schema_ok": "schemas/review.start.schema.json",
      "ticket": "T-06",
      "example_cli": "xuezh review start --limit 10 --json"
    },
    {
      "id": "review.grade",
      "cli": "xuezh review grade --item ITEM --grade 4 --json",
      "schema_ok": "schemas/review.grade.schema.json",
      "ticket": "T-06",
      "example_cli": "xuezh review grade --item ITEM --grade 4 --json"
    },
    {
      "id": "review.bury",
      "cli": "xuezh review bury --item ITEM --reason ... --json",
      "schema_ok": "schemas/review.bury.schema.json",
      "ticket": "T-06",
      "example_cli": "xuezh review bury --item ITEM --reason ... --json"
    },
    {
      "id": "srs.preview",
      "cli": "xuezh srs preview --days 14 --json",
      "schema_ok": "schemas/srs.preview.schema.json",
      "ticket": "T-06",
      "example_cli": "xuezh srs preview --days 14 --json"
    },
    {
      "id": "report.hsk",
      "cli": "xuezh report hsk --level 3 --window 30d --max-items 200 --max-bytes 200000 --json",
      "schema_ok": "schemas/report.hsk.schema.json",
      "ticket": "T-07",
      "example_cli": "xuezh report hsk --level 3 --window 30d --max-items 200 --max-bytes 200000 --json"
    },
    {
      "id": "report.mastery",
      "cli": "xuezh report mastery --item-type word --window 90d --max-items 200 --max-bytes 200000 --json",
      "schema_ok": "schemas/report.mastery.schema.json",
      "ticket": "T-07",
      "example_cli": "xuezh report mastery --item-type word --window 90d --max-items 200 --max-bytes 200000 --json"
    },
    {
      "id": "report.due",
      "cli": "xuezh report due --limit 50 --max-bytes 200000 --json",
      "schema_ok": "schemas/report.due.schema.json",
      "ticket": "T-07",
      "example_cli": "xuezh report due --limit 50 --max-bytes 200000 --json"
    },
    {
      "id": "audio.convert",
      "cli": "xuezh audio convert --in IN --out OUT --format wav --backend ffmpeg --json",
      "schema_ok": "schemas/audio.convert.schema.json",
      "ticket": "T-08",
      "example_cli": "xuezh audio convert --in IN --out OUT --format wav --backend ffmpeg --json"
    },
    {
      "id": "audio.tts",
      "cli": "xuezh audio tts --text TEXT --voice XiaoxiaoNeural --out OUT.ogg --backend edge-tts --json",
      "schema_ok": "schemas/audio.tts.schema.json",
      "ticket": "T-08",
      "example_cli": "xuezh audio tts --text TEXT --voice XiaoxiaoNeural --out OUT.ogg --backend edge-tts --json"
    },
    {
      "id": "audio.stt",
      "cli": "xuezh audio stt --in IN.wav --backend whisper --json",
      "schema_ok": "schemas/audio.stt.schema.json",
      "ticket": "T-09",
      "example_cli": "xuezh audio stt --in IN.wav --backend whisper --json"
    },
    {
      "id": "audio.assess",
      "cli": "xuezh audio assess --ref-text TEXT --in IN.wav --backend local --json",
      "schema_ok": "schemas/audio.assess.schema.json",
      "ticket": "T-10",
      "example_cli": "xuezh audio assess --ref-text TEXT --in IN.wav --backend local --json"
    },
    {
      "id": "audio.process-voice",
      "cli": "xuezh audio process-voice --in voice.ogg --ref-text TEXT --backend local --json",
      "schema_ok": "schemas/audio.process-voice.schema.json",
      "ticket": "T-10",
      "example_cli": "xuezh audio process-voice --in voice.ogg --ref-text TEXT --backend local --json"
    },
    {
      "id": "content.cache.put",
      "cli": "xuezh content cache put --type story --key HASH --in FILE --json",
      "schema_ok": "schemas/content.cache.put.schema.json",
      "ticket": "T-11",
      "example_cli": "xuezh content cache put --type story --key HASH --in FILE --json"
    },
    {
      "id": "content.cache.get",
      "cli": "xuezh content cache get --type story --key HASH --json",
      "schema_ok": "schemas/content.cache.get.schema.json",
      "ticket": "T-11",
      "example_cli": "xuezh content cache get --type story --key HASH --json"
    },
    {
      "id": "doctor",
      "cli": "xuezh doctor --json",
      "schema_ok": "schemas/doctor.schema.json",
      "ticket": "T-14",
      "example_cli": "xuezh doctor --json"
    },
    {
      "id": "event.log",
      "cli": "xuezh event log --type exposure --modality reading --items w_aaaaaaaaaaaa --json",
      "schema_ok": "schemas/event.log.schema.json",
      "ticket": "T-06B",
      "example_cli": "xuezh event log --type exposure --modality reading --items w_aaaaaaaaaaaa --json"
    },
    {
      "id": "event.list",
      "cli": "xuezh event list --since 7d --limit 200 --json",
      "schema_ok": "schemas/event.list.schema.json",
      "ticket": "T-06B",
      "example_cli": "xuezh event list --since 7d --limit 200 --json"
    },
    {
      "id": "gc",
      "cli": "xuezh gc --dry-run --json",
      "schema_ok": "schemas/gc.schema.json",
      "ticket": "T-02B",
      "example_cli": "xuezh gc --dry-run --json"
    }
  ],
  "forbidden_keys": [
    "recommended_next",
    "priority_score",
    "should_learn",
    "next_best_action"
  ]
}
