---
id: T-10
title: Pronunciation assessment v0 + process-voice pipeline (store attempts)
order: 10
depends_on: ["T-09", "T-03"]
blocks: ["T-14"]
implements_commands: ["audio.process-voice"]
user_requirements: ["UR-05", "UR-07"]
bdd: ["BDD-AUDIO"]
north_stars: ["NS-1", "NS-3"]
status: done
---
    # T-10: Pronunciation assessment v0 + process-voice pipeline (store attempts)

    ## Goal
    Provide an end-to-end voice-note pipeline: convert -> stt -> assess -> feedback audio -> store attempt.

    ## Deliverables
    - `xuezh audio process-voice --in voice.ogg --ref-text TEXT --json`
      - returns artifacts: normalized wav, transcript, assessment, feedback ogg
      - defaults to Azure Speech for pronunciation assessment
    - Internal assessment + STT primitives (not public contract)
    - Write `pronunciation_attempts` row linking artifacts


    ## Acceptance criteria
    - Single command produces Telegram-ready feedback audio
    - Stores attempt with timestamp and summary stats
    - Azure is the default pronunciation backend
    - Missing Azure credentials fail fast with typed auth error


    ## Test plan (RGR)
    - E2E: run process-voice with real tools/backends
    - Integration: validate envelope and artifact list


## Notes
Implemented pipeline with artifacts + attempt storage.
Public contract exposes only `audio.process-voice` per Option A.
