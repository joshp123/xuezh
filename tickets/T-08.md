---
id: T-08
title: Audio wrappers v1: convert + TTS (Telegram-ready artifacts)
order: 8
depends_on: ["T-02"]
blocks: ["T-10"]
implements_commands: ["audio.convert", "audio.tts"]
user_requirements: ["UR-05"]
bdd: ["BDD-AUDIO"]
north_stars: ["NS-1", "NS-3"]
status: done
---
    # T-08: Audio wrappers v1: convert + TTS (Telegram-ready artifacts)

    ## Goal
    Implement CLI wrappers around ffmpeg and edge-tts to produce ready-to-send audio files.

    ## Deliverables
    - `xuezh audio convert --in IN --out OUT --format wav|ogg|mp3 --backend ffmpeg`
- `xuezh audio tts --text TEXT --voice VOICE --out OUT.ogg --backend edge-tts`
- Validate tool availability, return typed TOOL_MISSING if absent


    ## Acceptance criteria
    - Converts Telegram voice notes (ogg/opus) to normalized wav (16k mono) deterministically
- TTS outputs Telegram-friendly ogg/opus
- Artifacts recorded in workspace store


    ## Test plan (RGR)
    - Integration: mock subprocess calls OR run with real ffmpeg if available
- Unit: command-building and path safety


## Notes
Implemented ffmpeg + edge-tts wrappers with workspace-safe output paths and artifacts.
Added command-building unit tests and added audio.convert/audio.tts to the implemented-commands ratchet.
